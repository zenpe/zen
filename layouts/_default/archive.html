{{ define "main" }}
<div class="archive-container">
  <div class="archive-content">
    {{ $pages := where site.RegularPages "Type" "posts" }}
    {{ $paginator := .Paginate $pages }}
    
    {{ range $paginator.Pages.GroupByDate "2006-01" }}
      <div class="archive-group">
        <h2 class="archive-month" id="{{ .Key }}">{{ .Key }}</h2>
        <ul class="archive-list">
          {{ range .Pages }}
            <li class="archive-item">
              <a href="{{ .Permalink }}" class="archive-link">{{ .Title }}</a>
              <div class="post-meta">
                <span class="meta-item">{{ .Date.Format "2006-01-02" }}</span>
                {{ with .Params.categories }}
                <span class="meta-divider">·</span>
                <span class="meta-item">
                  {{ range . }}
                    <a href="/categories/{{ . | urlize }}">{{ . }}</a>
                  {{ end }}
                </span>
                {{ end }}
                <span class="meta-divider">·</span>
                <span class="meta-item">
                  <span class="post-stats">
                    <span class="word-count">{{ .WordCount }} 字</span>
                    <span class="reading-time">约 {{ .ReadingTime }} 分钟</span>
                  </span>
                </span>
              </div>
            </li>
          {{ end }}
        </ul>
      </div>
    {{ end }}
    
    <!-- Pagination -->
    {{ if gt $paginator.TotalPages 1 }}
    <div class="pagination">
      {{ if $paginator.HasPrev }}
      <a href="{{ $paginator.Prev.URL }}" class="prev">上一页</a>
      {{ end }}
      <div class="page-number">{{ $paginator.PageNumber }} / {{ $paginator.TotalPages }}</div>
      {{ if $paginator.HasNext }}
      <a href="{{ $paginator.Next.URL }}" class="next">下一页</a>
      {{ end }}
    </div>
    {{ end }}
  </div>
</div>

{{ end }}