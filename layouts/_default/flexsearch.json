{{- $pages := where (where .Site.Pages "Lang" .Site.Language.Lang) "Kind" "in" (slice "page" "section") -}}
{{- $searchablePages := slice -}}
{{- range $pages -}}
    {{- if and .Content (ne .Layout "archives") (ne .Layout "search") -}}
        {{- $searchablePages = $searchablePages | append . -}}
    {{- end -}}
{{- end -}}

{{- $items := slice -}}
{{- range $searchablePages -}}
    {{- $item := dict "url" .RelPermalink "title" .Title "tags" .Params.tags "description" .Description "content" .Plain -}}
    {{- $items = $items | append $item -}}
{{- end -}}

{{- $items | jsonify -}}